(this["webpackJsonptaxes-fe"]=this["webpackJsonptaxes-fe"]||[]).push([[0],{100:function(e,t,c){},102:function(e,t,c){},132:function(e,t,c){},134:function(e,t,c){"use strict";c.r(t);var n=c(0),a=c.n(n),s=c(18),o=c.n(s),r=(c(99),c(100),c(68)),i=c.n(r),l=c(82),j=c(14),d=c(152),u=c(140),b=c(141),h=c(84),p=c(148),O=c(86),x=c(93),m=c(142),f=c(87),y=c(151),C=c(143),g=c(144),v=c(147),k=c(145),S=(c(102),c.p+"static/media/stripe_logo.1fd88ea7.svg"),w=c(45),N=c.n(w),T=c(9),q=c(2);var I=function(e){var t=e.stripePromise,c=Object(T.k)(),a=Object(n.useState)("2020"),s=Object(j.a)(a,2),o=s[0],r=s[1],w=Object(n.useState)(""),I=Object(j.a)(w,2),F=I[0],G=I[1],L=Object(n.useState)(""),_=Object(j.a)(L,2),A=_[0],P=_[1],R=Object(n.useState)([]),E=Object(j.a)(R,2),Y=E[0],D=E[1],U=Object(n.useState)(""),B=Object(j.a)(U,2),K=B[0],M=B[1],H=Object(n.useState)(!1),J=Object(j.a)(H,2),z=J[0],$=J[1],Q=Object(n.useState)(!1),V=Object(j.a)(Q,2),W=V[0],X=V[1],Z=Object(n.useState)(!1),ee=Object(j.a)(Z,2),te=ee[0],ce=ee[1],ne=Object(n.useState)(""),ae=Object(j.a)(ne,2),se=ae[0],oe=ae[1],re=Object(n.useState)(!1),ie=Object(j.a)(re,2),le=ie[0],je=ie[1],de=Object(n.useState)(""),ue=Object(j.a)(de,2),be=ue[0],he=ue[1],pe=function(){return""!==o&&""!==F&&Y.length>0&&z&&""!==K},Oe=function(){var e=Object(l.a)(i.a.mark((function e(){var n,a,s,r,l,j,d,u,b;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!W){e.next=2;break}return e.abrupt("return");case 2:for(he(""),X(!0),ce(!0),n=new FormData,a=document.querySelector("#statements"),s=0;s<a.files.length;s++)n.append("statements",a.files[s]);return n.append("type",F),n.append("year",o),n.append("email",A),n.append("fullName",K),n.append("coupon",se),e.prev=13,e.next=16,t;case 16:return r=e.sent,l="https://taxes-api.digitools-it.com",e.next=20,N.a.post("".concat(l,"/api/statements/upload"),n,{headers:{"Content-Type":"multipart/form-data"}});case 20:if(j=e.sent,d=j.data.request_id,le){e.next=33;break}return e.next=25,N.a.post("".concat(l,"/api/payments/create-checkout-session"),{request_id:d});case 25:return u=e.sent,b=u.data.id,e.next=29,r.redirectToCheckout({sessionId:b});case 29:e.sent.error&&c.push("/checkout?success=false&request_id="+d),e.next=34;break;case 33:c.push("/checkout?success=true&coupon=".concat(se,"&request_id=").concat(d));case 34:e.next=42;break;case 36:if(e.prev=36,e.t0=e.catch(13),!(e.t0.response&&e.t0.response.data&&e.t0.response.data.description)){e.next=41;break}return he(e.t0.response.data.description),e.abrupt("return");case 41:c.push("/checkout?success=false");case 42:return e.prev=42,X(!1),ce(!1),e.finish(42);case 46:case"end":return e.stop()}}),e,null,[[13,36,42,46]])})));return function(){return e.apply(this,arguments)}}();return Object(q.jsxs)(u.a,{fluid:!0,id:"upload-container",children:[Object(q.jsxs)(b.a,{children:[Object(q.jsx)(h.a,{}),Object(q.jsx)(h.a,{md:15,children:Object(q.jsxs)(p.a,{children:[Object(q.jsx)(p.a.Group,{children:Object(q.jsx)(O.a,{className:"text-center",children:Object(q.jsx)("h4",{children:"Submit statements"})})}),Object(q.jsx)(p.a.Group,{controlId:"formUploadYear",id:"form-group-year-dd",children:Object(q.jsxs)(x.a,{children:[Object(q.jsx)(m.a,{title:"Select year",variant:"outline-dark",id:"dropdown-year",onSelect:function(e){r(e)},children:Object(q.jsx)(x.a.Item,{eventKey:"2020",children:"2020"})}),Object(q.jsx)(p.a.Text,{children:Object(q.jsx)("strong",{children:o})})]})}),Object(q.jsx)(p.a.Group,{controlId:"formUploadType",children:Object(q.jsxs)(x.a,{children:[Object(q.jsxs)(m.a,{title:"Select type",variant:"outline-dark",id:"dropdown-type",onSelect:function(e){G(e)},children:[Object(q.jsx)(x.a.Item,{eventKey:"revolut",children:"revolut"}),Object(q.jsx)(x.a.Item,{eventKey:"etoro",children:"etoro"})]}),Object(q.jsx)(p.a.Text,{children:Object(q.jsx)("strong",{children:F})})]})}),Object(q.jsxs)(p.a.Group,{controlId:"formUploadStatements",children:[Object(q.jsx)(p.a.File,{onChange:function(e){for(var t=[],c=0;c<e.target.files.length;c++)t.push(e.target.files[c].name);D(t)},label:0===Y.length?"Select statements":1===Y.length?"1 file selected":Y.length+" files selected",id:"statements",className:"text-center",type:"file",name:"statements",multiple:!0,custom:!0}),0===Y.length?Object(q.jsx)(p.a.Text,{muted:!0,children:"Tax calculations will be applied on selected files"}):Y.map((function(e,t){return Object(q.jsx)(p.a.Text,{muted:!0,children:e},t)}))]}),Object(q.jsx)(p.a.Group,{controlId:"formFullName",id:"form-group-full-name",children:Object(q.jsx)(p.a.Control,{type:"input",className:"text-center",placeholder:"Your full name",autoComplete:"off",onChange:function(e){M(e.target.value)}})}),Object(q.jsxs)(p.a.Group,{controlId:"formEmail",id:"form-group-email-id",children:[Object(q.jsx)(p.a.Control,{type:"email",className:"text-center",placeholder:"Your email",autoComplete:"off",onChange:function(e){console.log("pk_test_AM0EATSk4K1O8P8NtUf4BEc9"),P(e.target.value);var t=new RegExp(/^[^\s@]+@[^\s@]+\.[^\s@]+$/);$(t.test(A.toLowerCase()))}}),Object(q.jsx)(p.a.Text,{muted:!0,children:"You will receive your report on the provided email"})]}),Object(q.jsxs)(p.a.Group,{controlId:"formCoupon",id:"form-group-coupon",children:[Object(q.jsx)(p.a.Control,{type:"input",className:"text-center",placeholder:"Coupon",value:se,autoComplete:"off",onChange:function(e){se.length+(e.target.value.length-se.length)>36||(Object(d.a)(e.target.value)?je(!0):je(!1),oe(e.target.value),he(""))}}),Object(q.jsx)(p.a.Text,{muted:!0,children:"Coupon field is optional. You will skip payments is you provide it and if it's a valid code."})]}),Object(q.jsxs)(p.a.Group,{controlId:"formSubmitButton",id:"form-group-submit-btn-id",children:[pe()&&le?Object(q.jsx)(f.a,{title:"submit",variant:"success",onClick:Oe,block:!0,children:"Submit"}):pe()?Object(q.jsxs)(f.a,{title:"submit",className:"btn-outline-dark",onClick:Oe,style:{color:"#FFF",backgroundColor:"#5433FF",cursor:"pointer"},children:["Submit and checkout with",Object(q.jsx)(g.a,{className:"align-content-end",src:S})]}):Object(q.jsx)(y.a,{placement:"bottom",delay:{show:250,hide:400},overlay:Object(q.jsx)(C.a,{children:"Select statements, type and input your name and email to submit"}),children:Object(q.jsxs)(f.a,{title:"submit",className:"btn-outline-dark",style:{color:"#FFF",backgroundColor:"#5433FF"},children:["Submit and checkout with",Object(q.jsx)(g.a,{className:"align-content-end",src:S})]})}),Object(q.jsx)(O.a,{className:"text-danger",children:be})]})]})}),Object(q.jsx)(h.a,{})]}),Object(q.jsx)(v.a,{size:"md","aria-labelledby":"contained-modal-title-vcenter",centered:!0,show:te,children:Object(q.jsx)(v.a.Header,{children:Object(q.jsxs)(v.a.Title,{id:"contained-modal-title-vcenter",children:["Processing request \xa0",Object(q.jsx)(k.a,{animation:"border",role:"status",children:Object(q.jsx)("span",{className:"sr-only",children:"Loading..."})})]})})})]})},F=c(150),G=c(149),L=c(88),_=c(89),A=(c(129),c(30)),P=c(24),R=c(90),E=c(91),Y=c(94),D=c(92),U=c(146),B=c(85),K=c(49),M=function(e){Object(Y.a)(c,e);var t=Object(D.a)(c);function c(){var e;Object(R.a)(this,c);for(var n=arguments.length,a=new Array(n),s=0;s<n;s++)a[s]=arguments[s];return(e=t.call.apply(t,[this].concat(a))).requestId=e.props.requestId,e.state={showCopyRequestTooltip:!1,showCopyCouponTooltip:!1,coupon:""},e.contactMail="nikolov@digitools-it.com",e.handleRequestIDCopyClick=function(){e.setState(Object(P.a)(Object(P.a)({},e.state),{},{showCopyRequestTooltip:!0})),setTimeout((function(){return e.setState(Object(P.a)(Object(P.a)({},e.state),{},{showCopyRequestTooltip:!1}))}),500)},e.handleCouponCopyClick=function(){e.setState(Object(P.a)(Object(P.a)({},e.state),{},{showCopyCouponTooltip:!0})),setTimeout((function(){return e.setState(Object(P.a)(Object(P.a)({},e.state),{},{showCopyCouponTooltip:!1}))}),500)},e}return Object(E.a)(c,[{key:"componentDidMount",value:function(){var e=this;N.a.post("".concat("https://taxes-api.digitools-it.com","/api/payments/obtain-coupon"),{request_id:this.requestId}).then((function(t){var c=t.data.coupon;""!==e.state.coupon&&""===c||e.setState(Object(P.a)(Object(P.a)({},e.state),{},{coupon:c}))})).catch((function(e){console.log(e)}))}},{key:"render",value:function(){var e=this.props.history;return Object(q.jsxs)(p.a,{children:[Object(q.jsx)(p.a.Group,{children:Object(q.jsx)(O.a,{className:"text-center",children:Object(q.jsx)("h4",{children:"Your request was processed successfully and a report is on its way to your mailbox"})})}),Object(q.jsx)("br",{}),Object(q.jsxs)(p.a.Group,{children:[Object(q.jsxs)(U.a,{className:"mb-2",children:[Object(q.jsx)(B.a,{value:this.requestId,disabled:!0,className:"text-center",placeholder:""}),Object(q.jsx)(U.a.Append,{children:Object(q.jsx)(y.a,{placement:"bottom",show:this.state.showCopyRequestTooltip,overlay:Object(q.jsx)(C.a,{id:"tooltip-disabled",children:"Copied"}),children:Object(q.jsx)("span",{className:"d-inline-block",children:Object(q.jsx)(K.CopyToClipboard,{text:this.requestId,children:Object(q.jsx)(f.a,{variant:"outline-info",onClick:this.handleRequestIDCopyClick,children:"Copy"})})})})})]}),Object(q.jsx)(O.a,{muted:!0,children:"Request ID"})]}),Object(q.jsxs)(p.a.Group,{children:[Object(q.jsxs)(U.a,{className:"mb-2",children:[Object(q.jsx)(B.a,{value:this.state.coupon,disabled:!0,className:"text-center",placeholder:""}),Object(q.jsx)(U.a.Append,{children:Object(q.jsx)(y.a,{placement:"bottom",show:this.state.showCopyCouponTooltip,overlay:Object(q.jsx)(C.a,{id:"tooltip-disabled",children:"Copied"}),children:Object(q.jsx)("span",{className:"d-inline-block",children:Object(q.jsx)(K.CopyToClipboard,{text:this.state.coupon,children:Object(q.jsx)(f.a,{variant:"outline-info",onClick:this.handleCouponCopyClick,children:"Copy"})})})})})]}),Object(q.jsx)(O.a,{muted:!0,children:"Coupon code"})]}),Object(q.jsx)("br",{}),Object(q.jsx)("br",{}),Object(q.jsx)(f.a,{block:!0,onClick:function(){return e.push("/")},children:"Try again"})]})}}]),c}(a.a.Component),H=Object(T.o)(M);var J=function(e){var t=e.requestId,c=Object(T.k)(),a=Object(n.useState)(!1),s=Object(j.a)(a,2),o=s[0],r=s[1],i="nikolov@digitools-it.com";return Object(q.jsxs)(p.a,{children:[null!=t&&""!==t.trim(" ")?Object(q.jsxs)(q.Fragment,{children:[Object(q.jsx)(p.a.Group,{children:Object(q.jsx)(O.a,{className:"text-center",children:Object(q.jsx)("h4",{children:"Unfortunately, we could not process your payment"})})}),Object(q.jsx)("br",{}),Object(q.jsxs)(p.a.Group,{children:[Object(q.jsxs)(U.a,{className:"mb-2",children:[Object(q.jsx)(B.a,{value:t,disabled:!0,className:"text-center",placeholder:""}),Object(q.jsx)(U.a.Append,{children:Object(q.jsx)(y.a,{placement:"bottom",show:o,overlay:Object(q.jsx)(C.a,{id:"tooltip-disabled",children:"Copied"}),children:Object(q.jsx)("span",{className:"d-inline-block",children:Object(q.jsx)(K.CopyToClipboard,{text:t,children:Object(q.jsx)(f.a,{variant:"outline-info",onClick:function(){r(!0),setTimeout((function(){return r(!1)}),500)},children:"Copy"})})})})})]}),Object(q.jsxs)("p",{children:["Above is your request ID. Please try submitting another request or send this to ",Object(q.jsx)("a",{href:"mailto:"+i,className:"border-bottom",children:i})," and ask for details"]})]})]}):Object(q.jsxs)(q.Fragment,{children:[Object(q.jsx)(p.a.Group,{children:Object(q.jsx)(O.a,{className:"text-center",children:Object(q.jsx)("h4",{children:"Your request failed"})})}),Object(q.jsx)("br",{}),Object(q.jsx)(p.a.Group,{children:Object(q.jsxs)("p",{children:["You were not charged for this operation. If this happened more than once please contact ",Object(q.jsx)("a",{href:"mailto:"+i,className:"border-bottom",children:i})," for more details. Sorry for the inconvenience."]})})]}),Object(q.jsx)("br",{}),Object(q.jsx)("br",{}),Object(q.jsx)(f.a,{block:!0,onClick:function(){return c.push("/")},children:"Try again"})]})};c(132);var z=function(){var e=new URLSearchParams(Object(T.l)().search),t=e.get("request_id"),c=e.get("success");return Object(q.jsx)(u.a,{fluid:!0,id:"checkout-container",children:Object(q.jsxs)(b.a,{children:[Object(q.jsx)(h.a,{}),Object(q.jsx)(h.a,{md:15,children:"true"===c?Object(q.jsx)(H,{requestId:t}):Object(q.jsx)(J,{requestId:t})}),Object(q.jsx)(h.a,{})]})})},$=c(64),Q=Object(L.loadStripe)("pk_test_AM0EATSk4K1O8P8NtUf4BEc9");var V=function(){return Object(q.jsx)(A.HashRouter,{children:Object(q.jsxs)("div",{className:"App",children:[Object(q.jsx)(F.a,{bg:"dark",variant:"dark",children:Object(q.jsxs)(G.a,{className:"mr-auto",children:[Object(q.jsx)($.LinkContainer,{to:"/",children:Object(q.jsx)(G.a.Link,{href:"",children:"Submit statements"})}),Object(q.jsx)($.LinkContainer,{to:"/",children:Object(q.jsx)(G.a.Link,{href:"",children:"Instructions"})}),Object(q.jsx)($.LinkContainer,{to:"/checkout",children:Object(q.jsx)(G.a.Link,{href:"",children:"Pricing"})})]})}),Object(q.jsx)(T.g,{children:Object(q.jsxs)(u.a,{children:[Object(q.jsx)(T.d,{path:"/",exact:!0,children:Object(q.jsx)(_.Elements,{stripe:Q,children:Object(q.jsx)(I,{stripePromise:Q})})}),Object(q.jsx)(T.d,{path:"/checkout",children:Object(q.jsx)(z,{})})]})})]})})},W=function(e){e&&e instanceof Function&&c.e(3).then(c.bind(null,153)).then((function(t){var c=t.getCLS,n=t.getFID,a=t.getFCP,s=t.getLCP,o=t.getTTFB;c(e),n(e),a(e),s(e),o(e)}))};o.a.render(Object(q.jsx)(a.a.StrictMode,{children:Object(q.jsx)(V,{})}),document.getElementById("root")),W()},99:function(e,t,c){}},[[134,1,2]]]);
//# sourceMappingURL=main.9a554806.chunk.js.map