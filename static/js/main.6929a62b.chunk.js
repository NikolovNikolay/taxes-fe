(this["webpackJsonptaxes-fe"]=this["webpackJsonptaxes-fe"]||[]).push([[0],{100:function(e,t,c){},101:function(e,t,c){},103:function(e,t,c){},133:function(e,t,c){},135:function(e,t,c){"use strict";c.r(t);var a=c(0),n=c.n(a),s=c(18),r=c.n(s),o=(c(100),c(101),c(68)),i=c.n(o),l=c(82),j=c(14),d=c(153),u=c(141),b=c(142),h=c(84),p=c(149),O=c(87),x=c(94),m=c(143),f=c(88),y=c(152),v=c(144),C=c(145),g=c(148),k=c(146),N=(c(103),c.p+"static/media/stripe_logo.1fd88ea7.svg"),S=c(45),w=c.n(S),T=c(9),q=c(2);var I=function(e){var t=e.stripePromise,c=Object(T.k)(),n=Object(a.useState)("2020"),s=Object(j.a)(n,2),r=s[0],o=s[1],S=Object(a.useState)(""),I=Object(j.a)(S,2),F=I[0],L=I[1],G=Object(a.useState)(""),R=Object(j.a)(G,2),E=R[0],P=R[1],_=Object(a.useState)([]),A=Object(j.a)(_,2),D=A[0],U=A[1],Y=Object(a.useState)(""),B=Object(j.a)(Y,2),K=B[0],M=B[1],H=Object(a.useState)(!1),J=Object(j.a)(H,2),z=J[0],$=J[1],Q=Object(a.useState)(!1),V=Object(j.a)(Q,2),W=V[0],X=V[1],Z=Object(a.useState)(!1),ee=Object(j.a)(Z,2),te=ee[0],ce=ee[1],ae=Object(a.useState)(""),ne=Object(j.a)(ae,2),se=ne[0],re=ne[1],oe=Object(a.useState)(!1),ie=Object(j.a)(oe,2),le=ie[0],je=ie[1],de=Object(a.useState)(""),ue=Object(j.a)(de,2),be=ue[0],he=ue[1],pe=function(){return""!==r&&""!==F&&D.length>0&&z&&""!==K},Oe=function(){var e=Object(l.a)(i.a.mark((function e(){var a,n,s,o,l,j,d,u,b;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!W){e.next=2;break}return e.abrupt("return");case 2:for(he(""),X(!0),ce(!0),a=new FormData,n=document.querySelector("#statements"),s=0;s<n.files.length;s++)a.append("statements",n.files[s]);return a.append("type",F),a.append("year",r),a.append("email",E),a.append("fullName",K),a.append("coupon",se),e.prev=13,e.next=16,t;case 16:return o=e.sent,l="https://taxes-api.digitools-it.com",e.next=20,w.a.post("".concat(l,"/api/statements/upload"),a,{headers:{"Content-Type":"multipart/form-data"}});case 20:if(j=e.sent,d=j.data.request_id,le){e.next=33;break}return e.next=25,w.a.post("".concat(l,"/api/payments/create-checkout-session"),{request_id:d});case 25:return u=e.sent,b=u.data.id,e.next=29,o.redirectToCheckout({sessionId:b});case 29:e.sent.error&&c.push("/checkout?success=false&request_id="+d),e.next=34;break;case 33:c.push("/checkout?success=true&coupon=".concat(se,"&request_id=").concat(d));case 34:e.next=42;break;case 36:if(e.prev=36,e.t0=e.catch(13),!(e.t0.response&&e.t0.response.data&&e.t0.response.data.description)){e.next=41;break}return he(e.t0.response.data.description),e.abrupt("return");case 41:c.push("/checkout?success=false");case 42:return e.prev=42,X(!1),ce(!1),e.finish(42);case 46:case"end":return e.stop()}}),e,null,[[13,36,42,46]])})));return function(){return e.apply(this,arguments)}}();return Object(q.jsxs)(u.a,{fluid:!0,id:"upload-container",children:[Object(q.jsx)(b.a,{className:"justify-content-md-center",children:Object(q.jsx)(h.a,{"justify-content-md-center":!0,sm:15,children:Object(q.jsxs)(p.a,{children:[Object(q.jsx)(p.a.Group,{className:"text-center",children:Object(q.jsx)(O.a,{children:Object(q.jsx)("h4",{children:"Submit new request"})})}),Object(q.jsxs)(p.a.Group,{controlId:"formUploadYear",id:"form-group-year-dd",children:[Object(q.jsx)(p.a.Label,{className:"text-start",children:"Select year"}),Object(q.jsx)(x.a,{children:Object(q.jsx)(m.a,{title:""!==r?r:"select",variant:"outline-dark",id:"dropdown-year",onSelect:function(e){o(e)},children:Object(q.jsx)(x.a.Item,{eventKey:"2020",children:"2020"})})})]}),Object(q.jsxs)(p.a.Group,{controlId:"formUploadType",children:[Object(q.jsx)(p.a.Label,{className:"text-start",children:"Select type"}),Object(q.jsx)(x.a,{children:Object(q.jsxs)(m.a,{title:""!==F?F:"select",variant:"outline-dark",id:"dropdown-type",onSelect:function(e){L(e)},children:[Object(q.jsx)(x.a.Item,{eventKey:"revolut",children:"revolut"}),Object(q.jsx)(x.a.Item,{eventKey:"etoro",children:"etoro"})]})})]}),Object(q.jsxs)(p.a.Group,{controlId:"formUploadStatements",children:[Object(q.jsx)(p.a.Label,{className:"text-start",children:"Select statements"}),Object(q.jsx)(p.a.File,{onChange:function(e){for(var t=[],c=0;c<e.target.files.length;c++)t.push(e.target.files[c].name);U(t)},label:0===D.length?"nothing selected":1===D.length?"1 file selected":D.length+" files selected",id:"statements",type:"file",name:"statements",multiple:!0,custom:!0}),0===D.length?Object(q.jsxs)(p.a.Text,{muted:!0,children:["Tax calculations will be applied on selected files for ",r]}):D.map((function(e,t){return Object(q.jsx)(p.a.Text,{muted:!0,children:e},t)}))]}),Object(q.jsxs)(p.a.Group,{controlId:"formFullName",id:"form-group-full-name",children:[Object(q.jsx)(p.a.Label,{className:"text-start",children:"Name"}),Object(q.jsx)(p.a.Control,{type:"input",placeholder:"Enter name",onChange:function(e){M(e.target.value),console.log(e.target.value)}})]}),Object(q.jsxs)(p.a.Group,{controlId:"formEmail",id:"form-group-email-id",children:[Object(q.jsx)(p.a.Label,{className:"text-start",children:"Email"}),Object(q.jsx)(p.a.Control,{type:"input",placeholder:"example@domain.com",onChange:function(e){P(e.target.value);var t=new RegExp(/^[^\s@]+@[^\s@]+\.[^\s@]+$/);null!=e.target.value&&$(t.test(e.target.value.toLowerCase()))}}),Object(q.jsx)(p.a.Text,{muted:!0,children:"You will receive your report on the provided email"})]}),Object(q.jsxs)(p.a.Group,{controlId:"formCoupon",id:"form-group-coupon",children:[Object(q.jsx)(p.a.Label,{className:"text-start",children:"Coupon"}),Object(q.jsx)(p.a.Control,{type:"input",placeholder:"Enter coupon if available",value:se,onChange:function(e){se.length+(e.target.value.length-se.length)>36||(Object(d.a)(e.target.value)?je(!0):je(!1),re(e.target.value),he(""))}}),Object(q.jsx)(p.a.Text,{muted:!0,children:"You will skip payments is it's a valid code"})]}),Object(q.jsxs)(p.a.Group,{controlId:"formSubmitButton",id:"form-group-submit-btn-id",children:[pe()&&le?Object(q.jsx)(f.a,{title:"submit",variant:"success",onClick:Oe,block:!0,children:"Submit"}):pe()?Object(q.jsxs)(f.a,{title:"submit",className:"btn-outline-dark",onClick:Oe,style:{color:"#FFF",backgroundColor:"#5433FF",cursor:"pointer"},children:["Submit and checkout with",Object(q.jsx)(C.a,{className:"align-content-end",src:N})]}):Object(q.jsx)(y.a,{placement:"bottom",delay:{show:250,hide:400},overlay:Object(q.jsx)(v.a,{children:"Select statements, type and input your name and email to submit"}),children:Object(q.jsxs)(f.a,{title:"submit",className:"btn-outline-dark",style:{color:"#FFF",backgroundColor:"#5433FF"},children:["Submit and checkout with",Object(q.jsx)(C.a,{className:"align-content-end",src:N})]})}),Object(q.jsx)(O.a,{className:"text-danger",children:be})]})]})})}),Object(q.jsx)(g.a,{size:"md","aria-labelledby":"contained-modal-title-vcenter",centered:!0,show:te,children:Object(q.jsx)(g.a.Header,{children:Object(q.jsxs)(g.a.Title,{id:"contained-modal-title-vcenter",children:["Processing request \xa0",Object(q.jsx)(k.a,{animation:"border",role:"status",children:Object(q.jsx)("span",{className:"sr-only",children:"Loading..."})})]})})})]})},F=c(151),L=c(150),G=c(89),R=c(90),E=(c(130),c(30)),P=c(24),_=c(91),A=c(92),D=c(95),U=c(93),Y=c(86),B=c(147),K=c(85),M=c(49),H=function(e){Object(D.a)(c,e);var t=Object(U.a)(c);function c(){var e;Object(_.a)(this,c);for(var a=arguments.length,n=new Array(a),s=0;s<a;s++)n[s]=arguments[s];return(e=t.call.apply(t,[this].concat(n))).requestId=e.props.requestId,e.state={showCopyRequestTooltip:!1,showCopyCouponTooltip:!1,coupon:""},e.handleRequestIDCopyClick=function(){e.setState(Object(P.a)(Object(P.a)({},e.state),{},{showCopyRequestTooltip:!0})),setTimeout((function(){return e.setState(Object(P.a)(Object(P.a)({},e.state),{},{showCopyRequestTooltip:!1}))}),500)},e.handleCouponCopyClick=function(){e.setState(Object(P.a)(Object(P.a)({},e.state),{},{showCopyCouponTooltip:!0})),setTimeout((function(){return e.setState(Object(P.a)(Object(P.a)({},e.state),{},{showCopyCouponTooltip:!1}))}),500)},e}return Object(A.a)(c,[{key:"componentDidMount",value:function(){var e=this;w.a.post("".concat("https://taxes-api.digitools-it.com","/api/payments/obtain-coupon"),{request_id:this.requestId}).then((function(t){var c=t.data.coupon;""!==e.state.coupon&&""===c||e.setState(Object(P.a)(Object(P.a)({},e.state),{},{coupon:c}))})).catch((function(e){console.log(e)}))}},{key:"render",value:function(){var e=this.props.history;return Object(q.jsxs)(p.a,{children:[Object(q.jsx)(p.a.Group,{children:Object(q.jsx)(O.a,{className:"text-center",children:Object(q.jsx)("h4",{children:"Your request was processed successfully and a report is on its way to your mailbox"})})}),Object(q.jsx)("br",{}),Object(q.jsxs)(p.a.Group,{children:[Object(q.jsx)(Y.a,{children:"Request ID"}),Object(q.jsxs)(B.a,{className:"mb-2",children:[Object(q.jsx)(K.a,{value:this.requestId,disabled:!0,className:"text-center",placeholder:""}),Object(q.jsx)(B.a.Append,{children:Object(q.jsx)(y.a,{placement:"bottom",show:this.state.showCopyRequestTooltip,overlay:Object(q.jsx)(v.a,{id:"tooltip-disabled",children:"Copied"}),children:Object(q.jsx)("span",{className:"d-inline-block",children:Object(q.jsx)(M.CopyToClipboard,{text:this.requestId,children:Object(q.jsx)(f.a,{variant:"outline-info",onClick:this.handleRequestIDCopyClick,children:"Copy"})})})})})]})]}),Object(q.jsx)("br",{}),Object(q.jsxs)(p.a.Group,{children:[Object(q.jsx)(Y.a,{children:"Coupon code"}),Object(q.jsxs)(B.a,{className:"mb-2",children:[Object(q.jsx)(K.a,{value:this.state.coupon,disabled:!0,className:"text-center",placeholder:""}),Object(q.jsx)(B.a.Append,{children:Object(q.jsx)(y.a,{placement:"bottom",show:this.state.showCopyCouponTooltip,overlay:Object(q.jsx)(v.a,{id:"tooltip-disabled",children:"Copied"}),children:Object(q.jsx)("span",{className:"d-inline-block",children:Object(q.jsx)(M.CopyToClipboard,{text:this.state.coupon,children:Object(q.jsx)(f.a,{variant:"outline-info",onClick:this.handleCouponCopyClick,children:"Copy"})})})})})]})]}),Object(q.jsx)("br",{}),Object(q.jsx)("br",{}),Object(q.jsx)(f.a,{block:!0,onClick:function(){return e.push("/")},children:"Try again"})]})}}]),c}(n.a.Component),J=Object(T.o)(H);var z=function(e){var t=e.requestId,c=Object(T.k)(),n=Object(a.useState)(!1),s=Object(j.a)(n,2),r=s[0],o=s[1],i="nikolov@digitools-it.com";return null!=t&&""!==t.trim(" ")?Object(q.jsxs)(p.a,{children:[Object(q.jsx)(p.a.Group,{children:Object(q.jsx)(O.a,{className:"text-center",children:Object(q.jsx)("h4",{children:"Unfortunately, we could not process your payment"})})}),Object(q.jsx)("br",{}),Object(q.jsxs)(p.a.Group,{children:[Object(q.jsxs)(B.a,{className:"mb-2",children:[Object(q.jsx)(K.a,{value:t,disabled:!0,className:"text-center",placeholder:""}),Object(q.jsx)(B.a.Append,{children:Object(q.jsx)(y.a,{placement:"bottom",show:r,overlay:Object(q.jsx)(v.a,{id:"tooltip-disabled",children:"Copied"}),children:Object(q.jsx)("span",{className:"d-inline-block",children:Object(q.jsx)(M.CopyToClipboard,{text:t,children:Object(q.jsx)(f.a,{variant:"outline-info",onClick:function(){o(!0),setTimeout((function(){return o(!1)}),500)},children:"Copy"})})})})})]}),Object(q.jsxs)(O.a,{children:["Above is your request ID. Please try submitting another request or send this to ",Object(q.jsx)("a",{href:"mailto:"+i,className:"border-bottom",children:i})," and ask for details"]})]}),Object(q.jsx)("br",{}),Object(q.jsx)("br",{}),Object(q.jsx)(f.a,{block:!0,onClick:function(){return c.push("/")},children:"Try again"})]}):Object(q.jsxs)(p.a,{children:[Object(q.jsx)(p.a.Group,{children:Object(q.jsx)(O.a,{className:"text-center",children:Object(q.jsx)("h4",{children:"Your request failed"})})}),Object(q.jsx)("br",{}),Object(q.jsx)(p.a.Group,{children:Object(q.jsxs)("p",{children:["You were not charged for this operation. If this happened more than once please contact ",Object(q.jsx)("a",{href:"mailto:"+i,className:"border-bottom",children:i})," for more details. Sorry for the inconvenience."]})}),Object(q.jsx)("br",{}),Object(q.jsx)("br",{}),Object(q.jsx)(b.a,{md:15,className:"justify-content-md-center",children:Object(q.jsx)(f.a,{onClick:function(){return c.push("/")},children:"Try again"})})]})};c(133);var $=function(){var e=new URLSearchParams(Object(T.l)().search),t=e.get("request_id"),c=e.get("success");return Object(q.jsx)(u.a,{fluid:!0,id:"checkout-container",children:Object(q.jsx)(b.a,{className:"justify-content-md-center",children:Object(q.jsx)(h.a,{className:"justify-content-md-center",md:7,sm:15,children:"true"===c?Object(q.jsx)(J,{requestId:t}):Object(q.jsx)(z,{requestId:t})})})})},Q=c(64),V=Object(G.loadStripe)("pk_test_AM0EATSk4K1O8P8NtUf4BEc9");var W=function(){return Object(q.jsx)(E.HashRouter,{children:Object(q.jsxs)("div",{className:"App",children:[Object(q.jsx)(F.a,{bg:"dark",variant:"dark",children:Object(q.jsxs)(L.a,{className:"mr-auto",children:[Object(q.jsx)(Q.LinkContainer,{to:"/",children:Object(q.jsx)(L.a.Link,{href:"",children:"Submit statements"})}),Object(q.jsx)(Q.LinkContainer,{to:"/",children:Object(q.jsx)(L.a.Link,{href:"",children:"Instructions"})}),Object(q.jsx)(Q.LinkContainer,{to:"/checkout",children:Object(q.jsx)(L.a.Link,{href:"",children:"Pricing"})})]})}),Object(q.jsx)(T.g,{children:Object(q.jsxs)(u.a,{children:[Object(q.jsx)(T.d,{path:"/",exact:!0,children:Object(q.jsx)(R.Elements,{stripe:V,children:Object(q.jsx)(I,{stripePromise:V})})}),Object(q.jsx)(T.d,{path:"/checkout",children:Object(q.jsx)($,{})})]})})]})})},X=function(e){e&&e instanceof Function&&c.e(3).then(c.bind(null,154)).then((function(t){var c=t.getCLS,a=t.getFID,n=t.getFCP,s=t.getLCP,r=t.getTTFB;c(e),a(e),n(e),s(e),r(e)}))};r.a.render(Object(q.jsx)(n.a.StrictMode,{children:Object(q.jsx)(W,{})}),document.getElementById("root")),X()}},[[135,1,2]]]);
//# sourceMappingURL=main.6929a62b.chunk.js.map